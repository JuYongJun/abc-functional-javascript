<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>abcjs - if else</title>
</head>
<body>
<script src="https://cdn.jsdelivr.net/bluebird/latest/bluebird.js"></script>
<script src="http://momentjs.com/downloads/moment.js"></script>

<script src="js/underscore.js"></script>
<script src="js/jquery.js"></script>
<script src="js/abc.js"></script>

<script>

    function f1() {
        console.log('f1')
    }

    function f2() {
        console.log('f2')
    }

    C(true, IF(f1).ELSE(f2));
    // f1

    C(false, IF(f1).ELSE(f2));
    // f2

    C(0,
        IF(f1)
        .ELSEIF(function(v) { return v === 0 },
            function(v) {
                console.log(v);
            })
        .ELSE(f2));
    // 0

    C(5, 0,
        IF(I, f1 // function I(v) { return v };
        ).ELSEIF(function(a, b) { return a < b },
            function(a, b) { console.log(a); }
        ).ELSE(f2));
    // f1

    C(0, 5,
        IF(I, f1
        ).ELSEIF(function(a, b) { return a > b },
            function(a, b) { console.log(a); }
        ).ELSE(f2));
    // f2

    C(0, 5,
        IF(I, f1
        ).ELSEIF(_.negate(function(a, b) { return a > b }),
            function(a, b) { console.log(a+b); }
        ).ELSE(f2));
    // 5


    // async
    G["a < b"] = CB(function(a, b, cb) {
        setTimeout(function() {
            console.log('1 sec');
            setTimeout(function() {
                console.log('2 sec');
                cb(a < b);
            }, 1000)
        }, 1000);
    });

    C(0, 5,
        IF(I, f1
        ).ELSEIF(G["a < b"],
            function(a, b) { console.log(a+b); }
        ).ELSE(f2));
    // 5

    C(0, 5, [
        IF(I, f1
        ).ELSEIF(G["a < b"],
            function(a, b) { return a + b; }
        ).ELSE(f2),
        function(a) {
            return a * a;
        },
        function(r) {
            console.log(r);
            // 25
        }
    ]);

</script>

</body>
</html>
